var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function r(t){return"function"==typeof t}function c(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function F(t,n){t.appendChild(n)}function l(t,n,e){t.insertBefore(n,e||null)}function u(t){t.parentNode&&t.parentNode.removeChild(t)}function s(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function i(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function f(){return a(" ")}function _(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function N(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function T(t,n){n=""+n,t.data!==n&&(t.data=n)}let U;function d(t){U=t}function h(t){(function(){if(!U)throw new Error("Function called outside component initialization");return U})().$$.on_mount.push(t)}const A=[],g=[];let E=[];const m=[],p=Promise.resolve();let L=!1;function P(t){E.push(t)}const b=new Set;let M=0;function $(){if(0!==M)return;const t=U;do{try{for(;M<A.length;){const t=A[M];M++,d(t),k(t.$$)}}catch(t){throw A.length=0,M=0,t}for(d(null),A.length=0,M=0;g.length;)g.pop()();for(let t=0;t<E.length;t+=1){const n=E[t];b.has(n)||(b.add(n),n())}E.length=0}while(A.length);for(;m.length;)m.pop()();L=!1,b.clear(),d(t)}function k(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(P)}}const B=new Set;function y(t,n){const e=t.$$;null!==e.fragment&&(!function(t){const n=[],e=[];E.forEach((o=>-1===t.indexOf(o)?n.push(o):e.push(o))),e.forEach((t=>t())),E=n}(e.after_update),o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function K(t,n){-1===t.$$.dirty[0]&&(A.push(t),L||(L=!0,p.then($)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function v(c,F,l,s,i,a,f,_=[-1]){const N=U;d(c);const T=c.$$={fragment:null,ctx:[],props:a,update:t,not_equal:i,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(F.context||(N?N.$$.context:[])),callbacks:e(),dirty:_,skip_bound:!1,root:F.target||N.$$.root};f&&f(T.root);let h=!1;if(T.ctx=l?l(c,F.props||{},((t,n,...e)=>{const o=e.length?e[0]:n;return T.ctx&&i(T.ctx[t],T.ctx[t]=o)&&(!T.skip_bound&&T.bound[t]&&T.bound[t](o),h&&K(c,t)),n})):[],T.update(),h=!0,o(T.before_update),T.fragment=!!s&&s(T.ctx),F.target){if(F.hydrate){const t=function(t){return Array.from(t.childNodes)}(F.target);T.fragment&&T.fragment.l(t),t.forEach(u)}else T.fragment&&T.fragment.c();F.intro&&((A=c.$$.fragment)&&A.i&&(B.delete(A),A.i(g))),function(t,e,c,F){const{fragment:l,after_update:u}=t.$$;l&&l.m(e,c),F||P((()=>{const e=t.$$.on_mount.map(n).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(P)}(c,F.target,F.anchor,F.customElement),$()}var A,g;d(N)}class Y{$destroy(){y(this,1),this.$destroy=t}$on(n,e){if(!r(e))return t;const o=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return o.push(e),()=>{const t=o.indexOf(e);-1!==t&&o.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function D(t,n,e){const o=t.slice();return o[27]=n[e],o[29]=e,o}function x(t,n,e){const o=t.slice();return o[30]=n[e],o[32]=e,o}function O(t){let n;return{c(){n=i("div"),n.textContent="GOAL"},m(t,e){l(t,n,e)},d(t){t&&u(n)}}}function S(t){let n,e;return{c(){n=i("div"),e=a(t[2])},m(t,o){l(t,n,o),F(n,e)},p(t,n){4&n[0]&&T(e,t[2])},d(t){t&&u(n)}}}function C(t){let n,e,r,c,s;function f(){return t[6](t[29],t[32])}function T(){return t[7](t[29],t[32])}return{c(){n=i("span"),e=a("□"),N(n,"style",r=t[30][3])},m(t,o){l(t,n,o),F(n,e),c||(s=[_(n,"keydown",f),_(n,"click",T)],c=!0)},p(e,o){t=e,8&o[0]&&r!==(r=t[30][3])&&N(n,"style",r)},d(t){t&&u(n),c=!1,o(s)}}}function w(t){let n,e,o=t[27],r=[];for(let n=0;n<o.length;n+=1)r[n]=C(x(t,o,n));return{c(){n=i("li");for(let t=0;t<r.length;t+=1)r[t].c();e=f(),N(n,"class","CELL")},m(t,o){l(t,n,o);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(n,null);F(n,e)},p(t,c){if(24&c[0]){let F;for(o=t[27],F=0;F<o.length;F+=1){const l=x(t,o,F);r[F]?r[F].p(l,c):(r[F]=C(l),r[F].c(),r[F].m(n,e))}for(;F<r.length;F+=1)r[F].d(1);r.length=o.length}},d(t){t&&u(n),s(r,t)}}}function I(n){let e,r,c,U,d,h,A,g,E,m,p,L,P,b,M,$,k,B,y,K,R,v,Y,x,C,I,W,G,j,V,q,z,H,J,Q,X,Z=n[1]&&O(),tt=n[2]&&S(n),nt=n[3],et=[];for(let t=0;t<nt.length;t+=1)et[t]=w(D(n,nt,t));return{c(){e=i("div"),r=f(),Z&&Z.c(),c=f(),tt&&tt.c(),U=f(),d=i("div"),h=a("PICKEL: "),A=a(n[0]),g=f(),E=i("ul");for(let t=0;t<et.length;t+=1)et[t].c();m=f(),p=i("div"),L=i("button"),L.textContent="◾️",P=f(),b=i("button"),b.textContent="W",M=f(),$=i("button"),$.textContent="◾️",k=f(),B=i("div"),y=i("button"),y.textContent="A",K=f(),R=i("button"),R.textContent="◾️",v=f(),Y=i("button"),Y.textContent="D",x=f(),C=i("div"),I=i("button"),I.textContent="◾️",W=f(),G=i("button"),G.textContent="S",j=f(),V=i("button"),V.textContent="◾️",q=f(),z=i("div"),z.textContent="Ver 0.0.0.4",H=f(),J=i("a"),J.textContent="GitHub",N(L,"class","WASD_NULL svelte-hh056d"),N(b,"class","WASD svelte-hh056d"),N($,"class","WASD_NULL svelte-hh056d"),N(y,"class","WASD svelte-hh056d"),N(R,"class","WASD_NULL svelte-hh056d"),N(Y,"class","WASD svelte-hh056d"),N(I,"class","WASD_NULL svelte-hh056d"),N(G,"class","WASD svelte-hh056d"),N(V,"class","WASD_NULL svelte-hh056d"),N(J,"href","https://github.com/taroyanaka/game/")},m(t,o){l(t,e,o),l(t,r,o),Z&&Z.m(t,o),l(t,c,o),tt&&tt.m(t,o),l(t,U,o),l(t,d,o),F(d,h),F(d,A),l(t,g,o),l(t,E,o);for(let t=0;t<et.length;t+=1)et[t]&&et[t].m(E,null);l(t,m,o),l(t,p,o),F(p,L),F(p,P),F(p,b),F(p,M),F(p,$),l(t,k,o),l(t,B,o),F(B,y),F(B,K),F(B,R),F(B,v),F(B,Y),l(t,x,o),l(t,C,o),F(C,I),F(C,W),F(C,G),F(C,j),F(C,V),l(t,q,o),l(t,z,o),l(t,H,o),l(t,J,o),Q||(X=[_(b,"click",n[8]),_(y,"click",n[9]),_(Y,"click",n[10]),_(G,"click",n[11])],Q=!0)},p(t,n){if(t[1]?Z||(Z=O(),Z.c(),Z.m(c.parentNode,c)):Z&&(Z.d(1),Z=null),t[2]?tt?tt.p(t,n):(tt=S(t),tt.c(),tt.m(U.parentNode,U)):tt&&(tt.d(1),tt=null),1&n[0]&&T(A,t[0]),24&n[0]){let e;for(nt=t[3],e=0;e<nt.length;e+=1){const o=D(t,nt,e);et[e]?et[e].p(o,n):(et[e]=w(o),et[e].c(),et[e].m(E,null))}for(;e<et.length;e+=1)et[e].d(1);et.length=nt.length}},i:t,o:t,d(t){t&&u(e),t&&u(r),Z&&Z.d(t),t&&u(c),tt&&tt.d(t),t&&u(U),t&&u(d),t&&u(g),t&&u(E),s(et,t),t&&u(m),t&&u(p),t&&u(k),t&&u(B),t&&u(x),t&&u(C),t&&u(q),t&&u(z),t&&u(H),t&&u(J),Q=!1,o(X)}}}function W(t,n,e){let o=[5,5],r=0,c=!1,F="",l=[],u=[],s=[{NAME:"USR",LFP:5,ATK:1}],i={};const a=(t,n)=>{o=[t,n];const e=[[n,n-1],[n,n+1],[n-1,n],[n+1,n]];return l=e,console.log(o[0],o[1],l),e},f=(t,n)=>{e(3,u[t][n][2]="NON",u),e(3,u[t][n][3]="background-color: #FFFFFF",u)};function _(t){const n={w:[-1,0],a:[0,-1],s:[1,0],d:[0,1]};if("t"===t.key)return void((t,n,r)=>{const c="UNT_NUM_"+t.toString(),F=s[0].ATK;if(i[c].LFP-=F,i[c].LFP<=0){const t=[o[0]+n,o[1]+r];f(t[0],t[1]),e(3,u[t[0]][t[1]][3]="background-color: #FFFFFF",u),i=R.omit([c],i)}})(0,-1,0);if("g"===t.key)return void N(0);if("b"===t.key)return void N(1);const F=[o[0]+n[t.key][0],o[1]+n[t.key][1]];"BLC"===u[F[0]][F[1]][2]&&(e(0,r+=1),f(F[0],F[1])),"USR"!==u[F[0]][F[1]][2]&&("GOL"===u[F[0]][F[1]][2]&&(e(1,c=!0),document.removeEventListener("keypress",_),setTimeout((()=>{U({when_mounted_time:!1})}),1e3)),"NON"===u[F[0]][F[1]][2]&&(e(3,u[F[0]][F[1]][2]="USR",u),e(3,u[o[0]][o[1]][2]="NON",u),e(3,u[F[0]][F[1]][3]="background-color: #0000FF",u),e(3,u[o[0]][o[1]][3]="background-color: #FFFFFF",u),console.log(),o=F),N(0),N(2),N(3),N(4),N(5),N(6),N(7),N(8),N(9),N(10),N(11),N(12),N(13),N(14),N(15),N(16))}const N=(t=0)=>{try{const n=u.map((t=>t.filter((t=>"USR"===t[2])))).filter((t=>t.length>0))[0][0],o=((t=0)=>{try{const n=t.toString(),e=(t.toString(),u.map((t=>t.filter((t=>"UNT"===t[2].TYPE&&t[2].NAME==="UNT_"+n)))).filter((t=>t.length>0))[0][0]),[o,r]=[e[0],e[1]];return[o,r]}catch(n){console.log(t),console.log(n)}})(t);if(o[1]===n[1]&&o[0]===n[0]-1||o[1]===n[1]&&o[0]===n[0]+1||o[0]===n[0]&&o[0]===n[1]-1||o[0]===n[0]&&o[0]===n[1]+1)return void(t=>{const n="UNT_NUM_"+t.toString(),o=i[n].ATK;s[0].LFP-=o,s[0].LFP<=0&&(e(2,F="YOU DIED, GAME OVER"),setTimeout((()=>{U({when_mounted_time:!1})}),1e3))})(t);Math.floor(4*Math.random());const r=[[o[0],o[1]-1],[o[0],o[1]+1],[o[0]-1,o[1]],[o[0]+1,o[1]]];let c=shuffle(r);for(let n=0;n<c.length;n++){let r=c[n];"NON"===u[r[0]][r[1]][2]&&(f(o[0],o[1]),e(3,u[o[0]][o[1]][3]="background-color: #FFFFFF",u),e(3,u[r[0]][r[1]][2]=i["UNT_NUM_"+t],u),e(3,u[r[0]][r[1]][3]="background-color: #00FF00",u),c=[])}}catch(t){console.log(t)}},T=()=>{(()=>{const t=u.map((t=>t.filter((t=>"NON"===t[2])))).flat().map((t=>t.slice(0,2)));Object.entries(i).forEach(((n,o)=>{const r="UNT_NUM_"+o.toString(),c=shuffle(t)[0];e(3,u[c[0]][c[1]][2]=i[r],u),e(3,u[c[0]][c[1]][3]="background-color: #00FF00",u)}))})()},U=({when_mounted_time:t=!0})=>{if(!1===t){if(!confirm("Again？"))return;U({when_mounted_time:!0})}var n,a;e(3,u=R.xprod(R.range(0,10),R.range(0,10)).map((t=>t.concat(["BLC"]))).map((t=>t.concat(["background-color: #808080"])))),e(3,u=R.splitEvery(10,u)),e(3,u[5][5][2]="USR",u),e(3,u[5][5][3]="background-color: #0000FF",u),e(2,F=""),s=[{NAME:"USR",LFP:5,ATK:1}],i={UNT_NUM_0:{TYPE:"UNT",NAME:"UNT_0",LFP:3,ATK:1},UNT_NUM_1:{TYPE:"UNT",NAME:"UNT_1",LFP:2,ATK:2},UNT_NUM_2:{TYPE:"UNT",NAME:"UNT_2",LFP:2,ATK:3},UNT_NUM_3:{TYPE:"UNT",NAME:"UNT_3",LFP:2,ATK:4},UNT_NUM_4:{TYPE:"UNT",NAME:"UNT_4",LFP:4,ATK:1},UNT_NUM_5:{TYPE:"UNT",NAME:"UNT_5",LFP:4,ATK:2},UNT_NUM_6:{TYPE:"UNT",NAME:"UNT_6",LFP:5,ATK:1},UNT_NUM_7:{TYPE:"UNT",NAME:"UNT_7",LFP:5,ATK:2},UNT_NUM_8:{TYPE:"UNT",NAME:"UNT_8",LFP:5,ATK:3},UNT_NUM_9:{TYPE:"UNT",NAME:"UNT_9",LFP:5,ATK:4},UNT_NUM_10:{TYPE:"UNT",NAME:"UNT_10",LFP:6,ATK:1},UNT_NUM_11:{TYPE:"UNT",NAME:"UNT_11",LFP:6,ATK:2},UNT_NUM_12:{TYPE:"UNT",NAME:"UNT_12",LFP:6,ATK:3},UNT_NUM_13:{TYPE:"UNT",NAME:"UNT_13",LFP:6,ATK:4},UNT_NUM_14:{TYPE:"UNT",NAME:"UNT_14",LFP:1,ATK:1},UNT_NUM_15:{TYPE:"UNT",NAME:"UNT_15",LFP:1,ATK:2},UNT_NUM_16:{TYPE:"UNT",NAME:"UNT_16",LFP:1,ATK:3}},a=9,e(3,u[n=0][a][2]="GOL",u),e(3,u[n][a][3]="background-color: #FFFF00",u),e(0,r=0),e(1,c=!1),l=[],o=[5,5],((t=80)=>{const n=u.map((t=>t.filter((t=>"BLC"===t[2])))).flat().length,e=Math.floor(n*(t/100));for(let t=0;t<e;t++){const t=[shuffle([0,1,2,3,4,5,6,7,8,9])[0],shuffle([0,1,2,3,4,5,6,7,8,9])[0]];"USR"!==u[t[0]][t[1]][2]&&"GOL"!==u[t[0]][t[1]][2]&&f(t[0],t[1])}})(),e(3,u[5][4][2]="NON",u),e(3,u[5][4][3]="background-color: #FFFFFF",u),e(3,u[5][6][2]="NON",u),e(3,u[5][6][3]="background-color: #FFFFFF",u),e(3,u[4][5][2]="NON",u),e(3,u[4][5][3]="background-color: #FFFFFF",u),e(3,u[6][5][2]="NON",u),e(3,u[6][5][3]="background-color: #FFFFFF",u),e(3,u[5][3][2]="NON",u),e(3,u[5][3][3]="background-color: #FFFFFF",u),e(3,u[5][7][2]="NON",u),e(3,u[5][7][3]="background-color: #FFFFFF",u),e(3,u[3][5][2]="NON",u),e(3,u[3][5][3]="background-color: #FFFFFF",u),e(3,u[7][5][2]="NON",u),e(3,u[7][5][3]="background-color: #FFFFFF",u),T(),document.addEventListener("keypress",_)};h((async()=>{try{U({when_mounted_time:!0})}catch(t){console.log(t)}}));return[r,c,F,u,a,_,(t,n)=>a(t,n),(t,n)=>a(t,n),()=>_({key:"w"}),()=>_({key:"a"}),()=>_({key:"d"}),()=>_({key:"s"})]}function G(t){let n=[{RARITY:0,LFP_BUFF:0,LFP_DEBUFF:0,ATK_BUFF:1,ATK_DEBUFF:0},{RARITY:1,LFP_BUFF:0,LFP_DEBUFF:0,ATK_BUFF:2,ATK_DEBUFF:0},{RARITY:2,LFP_BUFF:0,LFP_DEBUFF:0,ATK_BUFF:3,ATK_DEBUFF:0},{RARITY:3,LFP_BUFF:0,LFP_DEBUFF:0,ATK_BUFF:4,ATK_DEBUFF:0},{RARITY:90,LFP_BUFF:0,LFP_DEBUFF:0,ATK_BUFF:10,ATK_DEBUFF:0},{RARITY:0,LFP_BUFF:0,LFP_DEBUFF:0,ATK_BUFF:1,ATK_DEBUFF:0},{RARITY:1,LFP_BUFF:2,LFP_DEBUFF:0,ATK_BUFF:0,ATK_DEBUFF:0},{RARITY:2,LFP_BUFF:3,LFP_DEBUFF:0,ATK_BUFF:0,ATK_DEBUFF:0},{RARITY:3,LFP_BUFF:4,LFP_DEBUFF:0,ATK_BUFF:0,ATK_DEBUFF:0},{RARITY:90,LFP_BUFF:10,LFP_DEBUFF:0,ATK_BUFF:0,ATK_DEBUFF:0}].reduce(((t,n)=>{n.RARITY;const e=90===n.RARITY?1:0===n.RARITY?90:n.RARITY;for(let o=0;o<e;o++)t.push(n);return t}),[]);return shuffle(n.slice(0,100)),shuffle(n.slice(0,100)),[]}const j=new class extends Y{constructor(t){super(),v(this,t,W,I,c,{},null,[-1,-1])}}({target:document.body});return new class extends Y{constructor(t){super(),v(this,t,G,null,c,{})}}({target:document.body}),j}();
//# sourceMappingURL=bundle.js.map
