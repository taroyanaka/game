var app=function(){"use strict";function t(){}function n(t){return t()}function o(){return Object.create(null)}function e(t){t.forEach(n)}function r(t){return"function"==typeof t}function c(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function i(t,n){t.appendChild(n)}function u(t,n,o){t.insertBefore(n,o||null)}function l(t){t.parentNode&&t.parentNode.removeChild(t)}function s(t,n){for(let o=0;o<t.length;o+=1)t[o]&&t[o].d(n)}function f(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function d(){return a(" ")}function F(t,n,o,e){return t.addEventListener(n,o,e),()=>t.removeEventListener(n,o,e)}function g(t,n,o){null==o?t.removeAttribute(n):t.getAttribute(n)!==o&&t.setAttribute(n,o)}function p(t,n){n=""+n,t.data!==n&&(t.data=n)}let _;function h(t){_=t}function m(t){(function(){if(!_)throw new Error("Function called outside component initialization");return _})().$$.on_mount.push(t)}const N=[],$=[];let b=[];const T=[],k=Promise.resolve();let y=!1;function U(t){b.push(t)}const E=new Set;let A=0;function L(){if(0!==A)return;const t=_;do{try{for(;A<N.length;){const t=N[A];A++,h(t),O(t.$$)}}catch(t){throw N.length=0,A=0,t}for(h(null),N.length=0,A=0;$.length;)$.pop()();for(let t=0;t<b.length;t+=1){const n=b[t];E.has(n)||(E.add(n),n())}b.length=0}while(N.length);for(;T.length;)T.pop()();y=!1,E.clear(),h(t)}function O(t){if(null!==t.fragment){t.update(),e(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(U)}}const v=new Set;function M(t,n){const o=t.$$;null!==o.fragment&&(!function(t){const n=[],o=[];b.forEach((e=>-1===t.indexOf(e)?n.push(e):o.push(e))),o.forEach((t=>t())),b=n}(o.after_update),e(o.on_destroy),o.fragment&&o.fragment.d(n),o.on_destroy=o.fragment=null,o.ctx=[])}function x(t,n){-1===t.$$.dirty[0]&&(N.push(t),y||(y=!0,k.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function P(c,i,u,s,f,a,d,F=[-1]){const g=_;h(c);const p=c.$$={fragment:null,ctx:[],props:a,update:t,not_equal:f,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(g?g.$$.context:[])),callbacks:o(),dirty:F,skip_bound:!1,root:i.target||g.$$.root};d&&d(p.root);let m=!1;if(p.ctx=u?u(c,i.props||{},((t,n,...o)=>{const e=o.length?o[0]:n;return p.ctx&&f(p.ctx[t],p.ctx[t]=e)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](e),m&&x(c,t)),n})):[],p.update(),m=!0,e(p.before_update),p.fragment=!!s&&s(p.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);p.fragment&&p.fragment.l(t),t.forEach(l)}else p.fragment&&p.fragment.c();i.intro&&((N=c.$$.fragment)&&N.i&&(v.delete(N),N.i($))),function(t,o,c,i){const{fragment:u,after_update:l}=t.$$;u&&u.m(o,c),i||U((()=>{const o=t.$$.on_mount.map(n).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...o):e(o),t.$$.on_mount=[]})),l.forEach(U)}(c,i.target,i.anchor,i.customElement),L()}var N,$;h(g)}class K{$destroy(){M(this,1),this.$destroy=t}$on(n,o){if(!r(o))return t;const e=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return e.push(o),()=>{const t=e.indexOf(o);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function w(t,n,o){const e=t.slice();return e[25]=n[o],e}function C(t,n,o){const e=t.slice();return e[28]=n[o],e[30]=o,e}function S(t,n,o){const e=t.slice();return e[31]=n[o],e[33]=o,e}function j(t){let n;return{c(){n=f("div"),n.textContent="GOAL"},m(t,o){u(t,n,o)},d(t){t&&l(n)}}}function G(t){let n,o;return{c(){n=f("div"),o=a(t[2])},m(t,e){u(t,n,e),i(n,o)},p(t,n){4&n[0]&&p(o,t[2])},d(t){t&&l(n)}}}function B(t){let n,o,r,c,s;function d(){return t[10](t[30],t[33])}function p(){return t[11](t[30],t[33])}return{c(){n=f("span"),o=a("□"),g(n,"style",r=t[31][3])},m(t,e){u(t,n,e),i(n,o),c||(s=[F(n,"keydown",d),F(n,"click",p)],c=!0)},p(o,e){t=o,8&e[0]&&r!==(r=t[31][3])&&g(n,"style",r)},d(t){t&&l(n),c=!1,e(s)}}}function V(t){let n,o,e=t[28],r=[];for(let n=0;n<e.length;n+=1)r[n]=B(S(t,e,n));return{c(){n=f("li");for(let t=0;t<r.length;t+=1)r[t].c();o=d(),g(n,"class","CELL")},m(t,e){u(t,n,e);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(n,null);i(n,o)},p(t,c){if(72&c[0]){let i;for(e=t[28],i=0;i<e.length;i+=1){const u=S(t,e,i);r[i]?r[i].p(u,c):(r[i]=B(u),r[i].c(),r[i].m(n,o))}for(;i<r.length;i+=1)r[i].d(1);r.length=e.length}},d(t){t&&l(n),s(r,t)}}}function Y(t){let n,o,e,r,c,s,d=t[5][t[25]].NAME+"",F=t[5][t[25]].LFP+"",g=t[5][t[25]].ATK+"";return{c(){n=f("div"),o=a(d),e=a(" LFP: "),r=a(F),c=a(" ATK: "),s=a(g)},m(t,l){u(t,n,l),i(n,o),i(n,e),i(n,r),i(n,c),i(n,s)},p(t,n){32&n[0]&&d!==(d=t[5][t[25]].NAME+"")&&p(o,d),32&n[0]&&F!==(F=t[5][t[25]].LFP+"")&&p(r,F),32&n[0]&&g!==(g=t[5][t[25]].ATK+"")&&p(s,g)},d(t){t&&l(n)}}}function D(n){let o,r,c,g,_,h,m,N,$,b,T,k,y,U,E,A,L,O,v,M,x,P,K,R,S,B,D,I,q=n[4][0].NAME+"",z=n[4][0].LFP+"",H=n[4][0].ATK+"",J=n[1]&&j(),Q=n[2]&&G(n),W=n[3],X=[];for(let t=0;t<W.length;t+=1)X[t]=V(C(n,W,t));let Z=Object.keys(n[5]),tt=[];for(let t=0;t<Z.length;t+=1)tt[t]=Y(w(n,Z,t));return{c(){o=f("div"),o.innerHTML="<span>Ver 0.0.0.1</span>",r=d(),c=f("div"),g=d(),J&&J.c(),_=d(),Q&&Q.c(),h=d(),m=f("div"),N=a("PICKEL: "),$=a(n[0]),b=d(),T=f("ul");for(let t=0;t<X.length;t+=1)X[t].c();k=d(),y=f("div"),U=f("div"),E=a(q),A=a(" LFP: "),L=a(z),O=a(" ATK: "),v=a(H),M=d();for(let t=0;t<tt.length;t+=1)tt[t].c();x=d(),P=f("button"),P.textContent="get_USR_position",K=d(),R=f("button"),R.textContent="get_UNT_position",S=d(),B=f("button"),B.textContent="UNT_ATTACK_OR_MOVE"},m(t,e){u(t,o,e),u(t,r,e),u(t,c,e),u(t,g,e),J&&J.m(t,e),u(t,_,e),Q&&Q.m(t,e),u(t,h,e),u(t,m,e),i(m,N),i(m,$),u(t,b,e),u(t,T,e);for(let t=0;t<X.length;t+=1)X[t]&&X[t].m(T,null);u(t,k,e),u(t,y,e),i(y,U),i(U,E),i(U,A),i(U,L),i(U,O),i(U,v),i(y,M);for(let t=0;t<tt.length;t+=1)tt[t]&&tt[t].m(y,null);u(t,x,e),u(t,P,e),u(t,K,e),u(t,R,e),u(t,S,e),u(t,B,e),D||(I=[F(P,"click",n[12]),F(R,"click",n[13]),F(B,"click",n[14])],D=!0)},p(t,n){if(t[1]?J||(J=j(),J.c(),J.m(_.parentNode,_)):J&&(J.d(1),J=null),t[2]?Q?Q.p(t,n):(Q=G(t),Q.c(),Q.m(h.parentNode,h)):Q&&(Q.d(1),Q=null),1&n[0]&&p($,t[0]),72&n[0]){let o;for(W=t[3],o=0;o<W.length;o+=1){const e=C(t,W,o);X[o]?X[o].p(e,n):(X[o]=V(e),X[o].c(),X[o].m(T,null))}for(;o<X.length;o+=1)X[o].d(1);X.length=W.length}if(16&n[0]&&q!==(q=t[4][0].NAME+"")&&p(E,q),16&n[0]&&z!==(z=t[4][0].LFP+"")&&p(L,z),16&n[0]&&H!==(H=t[4][0].ATK+"")&&p(v,H),32&n[0]){let o;for(Z=Object.keys(t[5]),o=0;o<Z.length;o+=1){const e=w(t,Z,o);tt[o]?tt[o].p(e,n):(tt[o]=Y(e),tt[o].c(),tt[o].m(y,null))}for(;o<tt.length;o+=1)tt[o].d(1);tt.length=Z.length}},i:t,o:t,d(t){t&&l(o),t&&l(r),t&&l(c),t&&l(g),J&&J.d(t),t&&l(_),Q&&Q.d(t),t&&l(h),t&&l(m),t&&l(b),t&&l(T),s(X,t),t&&l(k),t&&l(y),s(tt,t),t&&l(x),t&&l(P),t&&l(K),t&&l(R),t&&l(S),t&&l(B),D=!1,e(I)}}}function I(t,n,o){let e=[5,5],r=0,c=!1,i="",u=[],l=[],s=[{NAME:"USR",LFP:5,ATK:1}],f={UNT_NUM_0:{NAME:"UNT_0",LFP:3,ATK:1},UNT_NUM_1:{NAME:"UNT_1",LFP:2,ATK:2}};const a=(t,n)=>{e=[t,n];const o=[[n,n-1],[n,n+1],[n-1,n],[n+1,n]];return u=o,console.log(e[0],e[1],u),o},d=(t,n)=>{o(3,l[t][n][2]="NON",l),o(3,l[t][n][3]="background-color: #FFFFFF",l)};function F(t){const n={w:[-1,0],a:[0,-1],s:[1,0],d:[0,1]};if("t"===t.key)return void((t,n,r)=>{const c="UNT_NUM_"+t.toString(),i=s[0].ATK;if(o(5,f[c].LFP-=i,f),f[c].LFP<=0){const t=[e[0]+n,e[1]+r];d(t[0],t[1]),o(3,l[t[0]][t[1]][3]="background-color: #FFFFFF",l),o(5,f=R.omit([c],f))}})(0,-1,0);if("g"===t.key)return void _(0);if("b"===t.key)return void _(1);const i=[e[0]+n[t.key][0],e[1]+n[t.key][1]];"BLC"===l[i[0]][i[1]][2]&&(o(0,r+=1),d(i[0],i[1])),"USR"!==l[i[0]][i[1]][2]&&("GOL"===l[i[0]][i[1]][2]&&(o(1,c=!0),document.removeEventListener("keypress",F),setTimeout((()=>{h({when_mounted_time:!1})}),1e3)),"NON"===l[i[0]][i[1]][2]&&(o(3,l[i[0]][i[1]][2]="USR",l),o(3,l[e[0]][e[1]][2]="NON",l),o(3,l[i[0]][i[1]][3]="background-color: #0000FF",l),o(3,l[e[0]][e[1]][3]="background-color: #FFFFFF",l),console.log("COLLECT_VALUE2[go_to_y_x[0]][go_to_y_x[1]]",l[i[0]][i[1]]),e=i))}const g=()=>l.map((t=>t.filter((t=>"USR"===t[2])))).filter((t=>t.length>0))[0][0],p=(t=0)=>{t.toString();const n=l.map((n=>n.filter((n=>"UNT"===n[2].TYPE&&n[2].NAME==="UNT_"+t)))).filter((t=>t.length>0))[0][0],[o,e]=[n[0],n[1]];return[o,e]},_=(t=0)=>{const n=g(),e=p(t);if(console.log("unt_position[0]",e[0],"unt_position[1]",e[1],"usr_position[0]",n[0],"usr_position[1]",n[1],"( (unt_position[1] === usr_position[1]) && (unt_position[0] === usr_position[0] - 1) )",e[1]===n[1]&&e[0]===n[0]-1,"( (unt_position[1] === usr_position[1]) && (unt_position[0] === usr_position[0] + 1) )",e[1]===n[1]&&e[0]===n[0]+1,"( (unt_position[1] === usr_position[0]) && (unt_position[0] === usr_position[1] + 1) )",e[1]===n[0]&&e[0]===n[1]+1,"( (unt_position[1] === usr_position[0]) && (unt_position[0] === usr_position[1] + 1) )",e[1]===n[0]&&e[0]===n[1]+1),e[1]===n[1]&&e[0]===n[0]-1||e[1]===n[1]&&e[0]===n[0]+1||e[0]===n[0]&&e[0]===n[1]-1||e[0]===n[0]&&e[0]===n[1]+1)return void(t=>{const n="UNT_NUM_"+t.toString(),e=f[n].ATK;o(4,s[0].LFP-=e,s),s[0].LFP<=0&&(o(2,i="YOU DIED, GAME OVER"),setTimeout((()=>{h({when_mounted_time:!1})}),1e3))})(t);const r=[[e[0],e[1]-1],[e[0],e[1]+1],[e[0]-1,e[1]],[e[0]+1,e[1]]];let c=shuffle(r);for(let n=0;n<c.length;n++){let r=c[n];"NON"===l[r[0]][r[1]][2]&&(d(e[0],e[1]),o(3,l[e[0]][e[1]][3]="background-color: #FFFFFF",l),o(3,l[r[0]][r[1]][2]=f["UNT_NUM_"+t],l),o(3,l[r[0]][r[1]][3]="background-color: #00FF00",l),c=[])}},h=({when_mounted_time:t=!0})=>{if(!1===t){if(!confirm("Again？"))return;h({when_mounted_time:!0})}var n,a;o(3,l=R.xprod(R.range(0,10),R.range(0,10)).map((t=>t.concat(["BLC"]))).map((t=>t.concat(["background-color: #808080"])))),o(3,l=R.splitEvery(10,l)),o(3,l[5][5][2]="USR",l),o(3,l[5][5][3]="background-color: #0000FF",l),o(2,i=""),o(4,s=[{NAME:"USR",LFP:5,ATK:1}]),o(5,f={UNT_NUM_0:{TYPE:"UNT",NAME:"UNT_0",LFP:3,ATK:1},UNT_NUM_1:{TYPE:"UNT",NAME:"UNT_1",LFP:2,ATK:2}}),a=9,o(3,l[n=0][a][2]="GOL",l),o(3,l[n][a][3]="background-color: #FFFF00",l),o(0,r=0),o(1,c=!1),u=[],e=[5,5],((t=30)=>{const n=l.map((t=>t.filter((t=>"BLC"===t[2])))).flat().length,o=Math.floor(n*(t/100));for(let t=0;t<o;t++){const t=[shuffle([0,1,2,3,4,5,6,7,8,9])[0],shuffle([0,1,2,3,4,5,6,7,8,9])[0]];"USR"!==l[t[0]][t[1]][2]&&"GOL"!==l[t[0]][t[1]][2]&&d(t[0],t[1])}})(),o(3,l[5][4][2]="NON",l),o(3,l[5][4][3]="background-color: #FFFFFF",l),o(3,l[5][6][2]="NON",l),o(3,l[5][6][3]="background-color: #FFFFFF",l),o(3,l[4][5][2]="NON",l),o(3,l[4][5][3]="background-color: #FFFFFF",l),o(3,l[6][5][2]="NON",l),o(3,l[6][5][3]="background-color: #FFFFFF",l),o(3,l[5][3][2]="NON",l),o(3,l[5][3][3]="background-color: #FFFFFF",l),o(3,l[5][7][2]="NON",l),o(3,l[5][7][3]="background-color: #FFFFFF",l),o(3,l[3][5][2]="NON",l),o(3,l[3][5][3]="background-color: #FFFFFF",l),o(3,l[7][5][2]="NON",l),o(3,l[7][5][3]="background-color: #FFFFFF",l),o(3,l[6][4][3]="background-color: #00FF00",l),o(3,l[6][4][2]=f.UNT_NUM_0,l),o(3,l[5][6][3]="background-color: #00FF00",l),o(3,l[5][6][2]=f.UNT_NUM_1,l),document.addEventListener("keypress",F)};m((async()=>{try{h({when_mounted_time:!0})}catch(t){console.log(t)}}));return[r,c,i,l,s,f,a,g,p,_,(t,n)=>a(t,n),(t,n)=>a(t,n),()=>g(),()=>p(),()=>_()]}return new class extends K{constructor(t){super(),P(this,t,I,D,c,{},null,[-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
