var app=function(t){"use strict";function n(){}function e(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(e)}function c(t){return"function"==typeof t}function l(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function u(t,n){t.appendChild(n)}function s(t,n,e){t.insertBefore(n,e||null)}function i(t){t.parentNode&&t.parentNode.removeChild(t)}function F(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function f(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function N(){return a(" ")}function d(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function T(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function _(t,n){n=""+n,t.data!==n&&(t.data=n)}let U;function h(t){U=t}function g(t){(function(){if(!U)throw new Error("Function called outside component initialization");return U})().$$.on_mount.push(t)}const A=[],m=[];let p=[];const E=[],L=Promise.resolve();let P=!1;function b(t){p.push(t)}const k=new Set;let M=0;function $(){if(0!==M)return;const t=U;do{try{for(;M<A.length;){const t=A[M];M++,h(t),y(t.$$)}}catch(t){throw A.length=0,M=0,t}for(h(null),A.length=0,M=0;m.length;)m.pop()();for(let t=0;t<p.length;t+=1){const n=p[t];k.has(n)||(k.add(n),n())}p.length=0}while(A.length);for(;E.length;)E.pop()();P=!1,k.clear(),h(t)}function y(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(b)}}const v=new Set;function K(t,n){const e=t.$$;null!==e.fragment&&(!function(t){const n=[],e=[];p.forEach((o=>-1===t.indexOf(o)?n.push(o):e.push(o))),e.forEach((t=>t())),p=n}(e.after_update),r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function Y(t,n){-1===t.$$.dirty[0]&&(A.push(t),P||(P=!0,L.then($)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function x(t,l,u,s,F,f,a,N=[-1]){const d=U;h(t);const T=t.$$={fragment:null,ctx:[],props:f,update:n,not_equal:F,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l.context||(d?d.$$.context:[])),callbacks:o(),dirty:N,skip_bound:!1,root:l.target||d.$$.root};a&&a(T.root);let _=!1;if(T.ctx=u?u(t,l.props||{},((n,e,...o)=>{const r=o.length?o[0]:e;return T.ctx&&F(T.ctx[n],T.ctx[n]=r)&&(!T.skip_bound&&T.bound[n]&&T.bound[n](r),_&&Y(t,n)),e})):[],T.update(),_=!0,r(T.before_update),T.fragment=!!s&&s(T.ctx),l.target){if(l.hydrate){const t=function(t){return Array.from(t.childNodes)}(l.target);T.fragment&&T.fragment.l(t),t.forEach(i)}else T.fragment&&T.fragment.c();l.intro&&((g=t.$$.fragment)&&g.i&&(v.delete(g),g.i(A))),function(t,n,o,l){const{fragment:u,after_update:s}=t.$$;u&&u.m(n,o),l||b((()=>{const n=t.$$.on_mount.map(e).filter(c);t.$$.on_destroy?t.$$.on_destroy.push(...n):r(n),t.$$.on_mount=[]})),s.forEach(b)}(t,l.target,l.anchor,l.customElement),$()}var g,A;h(d)}class B{$destroy(){K(this,1),this.$destroy=n}$on(t,e){if(!c(e))return n;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(e),()=>{const t=o.indexOf(e);-1!==t&&o.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function O(t,n,e){const o=t.slice();return o[27]=n[e],o[29]=e,o}function S(t,n,e){const o=t.slice();return o[30]=n[e],o[32]=e,o}function D(t){let n;return{c(){n=f("div"),n.textContent="GOAL"},m(t,e){s(t,n,e)},d(t){t&&i(n)}}}function C(t){let n,e;return{c(){n=f("div"),e=a(t[2])},m(t,o){s(t,n,o),u(n,e)},p(t,n){4&n[0]&&_(e,t[2])},d(t){t&&i(n)}}}function w(t){let n,e,o,c,l;function F(){return t[6](t[29],t[32])}function N(){return t[7](t[29],t[32])}return{c(){n=f("span"),e=a("□"),T(n,"style",o=t[30][3])},m(t,o){s(t,n,o),u(n,e),c||(l=[d(n,"keydown",F),d(n,"click",N)],c=!0)},p(e,r){t=e,8&r[0]&&o!==(o=t[30][3])&&T(n,"style",o)},d(t){t&&i(n),c=!1,r(l)}}}function I(t){let n,e,o=t[27],r=[];for(let n=0;n<o.length;n+=1)r[n]=w(S(t,o,n));return{c(){n=f("li");for(let t=0;t<r.length;t+=1)r[t].c();e=N(),T(n,"class","CELL")},m(t,o){s(t,n,o);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(n,null);u(n,e)},p(t,c){if(24&c[0]){let l;for(o=t[27],l=0;l<o.length;l+=1){const u=S(t,o,l);r[l]?r[l].p(u,c):(r[l]=w(u),r[l].c(),r[l].m(n,e))}for(;l<r.length;l+=1)r[l].d(1);r.length=o.length}},d(t){t&&i(n),F(r,t)}}}function W(t){let e,o,c,l,U,h,g,A,m,p,E,L,P,b,k,M,$,y,R,v,K,Y,x,B,S,w,W,G,j,V,q,z,H,J,Q,X,Z=t[1]&&D(),tt=t[2]&&C(t),nt=t[3],et=[];for(let n=0;n<nt.length;n+=1)et[n]=I(O(t,nt,n));return{c(){e=f("div"),o=N(),Z&&Z.c(),c=N(),tt&&tt.c(),l=N(),U=f("div"),h=a("PICKEL: "),g=a(t[0]),A=N(),m=f("ul");for(let t=0;t<et.length;t+=1)et[t].c();p=N(),E=f("div"),L=f("button"),L.textContent="◾️",P=N(),b=f("button"),b.textContent="W",k=N(),M=f("button"),M.textContent="◾️",$=N(),y=f("div"),R=f("button"),R.textContent="A",v=N(),K=f("button"),K.textContent="◾️",Y=N(),x=f("button"),x.textContent="D",B=N(),S=f("div"),w=f("button"),w.textContent="◾️",W=N(),G=f("button"),G.textContent="S",j=N(),V=f("button"),V.textContent="◾️",q=N(),z=f("div"),z.textContent="Ver 0.0.0.4",H=N(),J=f("a"),J.textContent="GitHub",T(L,"class","WASD_NULL svelte-hh056d"),T(b,"class","WASD svelte-hh056d"),T(M,"class","WASD_NULL svelte-hh056d"),T(R,"class","WASD svelte-hh056d"),T(K,"class","WASD_NULL svelte-hh056d"),T(x,"class","WASD svelte-hh056d"),T(w,"class","WASD_NULL svelte-hh056d"),T(G,"class","WASD svelte-hh056d"),T(V,"class","WASD_NULL svelte-hh056d"),T(J,"href","https://github.com/taroyanaka/game/")},m(n,r){s(n,e,r),s(n,o,r),Z&&Z.m(n,r),s(n,c,r),tt&&tt.m(n,r),s(n,l,r),s(n,U,r),u(U,h),u(U,g),s(n,A,r),s(n,m,r);for(let t=0;t<et.length;t+=1)et[t]&&et[t].m(m,null);s(n,p,r),s(n,E,r),u(E,L),u(E,P),u(E,b),u(E,k),u(E,M),s(n,$,r),s(n,y,r),u(y,R),u(y,v),u(y,K),u(y,Y),u(y,x),s(n,B,r),s(n,S,r),u(S,w),u(S,W),u(S,G),u(S,j),u(S,V),s(n,q,r),s(n,z,r),s(n,H,r),s(n,J,r),Q||(X=[d(b,"click",t[8]),d(R,"click",t[9]),d(x,"click",t[10]),d(G,"click",t[11])],Q=!0)},p(t,n){if(t[1]?Z||(Z=D(),Z.c(),Z.m(c.parentNode,c)):Z&&(Z.d(1),Z=null),t[2]?tt?tt.p(t,n):(tt=C(t),tt.c(),tt.m(l.parentNode,l)):tt&&(tt.d(1),tt=null),1&n[0]&&_(g,t[0]),24&n[0]){let e;for(nt=t[3],e=0;e<nt.length;e+=1){const o=O(t,nt,e);et[e]?et[e].p(o,n):(et[e]=I(o),et[e].c(),et[e].m(m,null))}for(;e<et.length;e+=1)et[e].d(1);et.length=nt.length}},i:n,o:n,d(t){t&&i(e),t&&i(o),Z&&Z.d(t),t&&i(c),tt&&tt.d(t),t&&i(l),t&&i(U),t&&i(A),t&&i(m),F(et,t),t&&i(p),t&&i(E),t&&i($),t&&i(y),t&&i(B),t&&i(S),t&&i(q),t&&i(z),t&&i(H),t&&i(J),Q=!1,r(X)}}}function G(t,n,e){let o=[5,5],r=0,c=!1,l="",u=[],s=[],i=[{NAME:"USR",LFP:5,ATK:1}],F={};const f=(t,n)=>{o=[t,n];const e=[[n,n-1],[n,n+1],[n-1,n],[n+1,n]];return u=e,console.log(o[0],o[1],u),e},a=(t,n)=>{e(3,s[t][n][2]="NON",s),e(3,s[t][n][3]="background-color: #FFFFFF",s)};function N(t){const n={w:[-1,0],a:[0,-1],s:[1,0],d:[0,1],g:slot_exe_once()};if("t"===t.key)return void((t,n,r)=>{const c="UNT_NUM_"+t.toString(),l=i[0].ATK;if(F[c].LFP-=l,F[c].LFP<=0){const t=[o[0]+n,o[1]+r];a(t[0],t[1]),e(3,s[t[0]][t[1]][3]="background-color: #FFFFFF",s),F=R.omit([c],F)}})(0,-1,0);if("g"===t.key)return void d(0);if("b"===t.key)return void d(1);const l=[o[0]+n[t.key][0],o[1]+n[t.key][1]];"BLC"===s[l[0]][l[1]][2]&&(e(0,r+=1),a(l[0],l[1])),"USR"!==s[l[0]][l[1]][2]&&("GOL"===s[l[0]][l[1]][2]&&(e(1,c=!0),document.removeEventListener("keypress",N),setTimeout((()=>{_({when_mounted_time:!1})}),1e3)),"NON"===s[l[0]][l[1]][2]&&(e(3,s[l[0]][l[1]][2]="USR",s),e(3,s[o[0]][o[1]][2]="NON",s),e(3,s[l[0]][l[1]][3]="background-color: #0000FF",s),e(3,s[o[0]][o[1]][3]="background-color: #FFFFFF",s),console.log(),o=l),d(0),d(2),d(3),d(4),d(5),d(6),d(7),d(8),d(9),d(10),d(11),d(12),d(13),d(14),d(15),d(16))}const d=(t=0)=>{try{const n=s.map((t=>t.filter((t=>"USR"===t[2])))).filter((t=>t.length>0))[0][0],o=((t=0)=>{try{const n=t.toString(),e=(t.toString(),s.map((t=>t.filter((t=>"UNT"===t[2].TYPE&&t[2].NAME==="UNT_"+n)))).filter((t=>t.length>0))[0][0]),[o,r]=[e[0],e[1]];return[o,r]}catch(n){console.log(t),console.log(n)}})(t);if(o[1]===n[1]&&o[0]===n[0]-1||o[1]===n[1]&&o[0]===n[0]+1||o[0]===n[0]&&o[0]===n[1]-1||o[0]===n[0]&&o[0]===n[1]+1)return void(t=>{const n="UNT_NUM_"+t.toString(),o=F[n].ATK;i[0].LFP-=o,i[0].LFP<=0&&(e(2,l="YOU DIED, GAME OVER"),setTimeout((()=>{_({when_mounted_time:!1})}),1e3))})(t);Math.floor(4*Math.random());const r=[[o[0],o[1]-1],[o[0],o[1]+1],[o[0]-1,o[1]],[o[0]+1,o[1]]];let c=shuffle(r);for(let n=0;n<c.length;n++){let r=c[n];"NON"===s[r[0]][r[1]][2]&&(a(o[0],o[1]),e(3,s[o[0]][o[1]][3]="background-color: #FFFFFF",s),e(3,s[r[0]][r[1]][2]=F["UNT_NUM_"+t],s),e(3,s[r[0]][r[1]][3]="background-color: #00FF00",s),c=[])}}catch(t){console.log(t)}},T=()=>{(()=>{const t=s.map((t=>t.filter((t=>"NON"===t[2])))).flat().map((t=>t.slice(0,2)));Object.entries(F).forEach(((n,o)=>{const r="UNT_NUM_"+o.toString(),c=shuffle(t)[0];e(3,s[c[0]][c[1]][2]=F[r],s),e(3,s[c[0]][c[1]][3]="background-color: #00FF00",s)}))})()},_=({when_mounted_time:t=!0})=>{if(!1===t){if(!confirm("Again？"))return;_({when_mounted_time:!0})}var n,f;e(3,s=R.xprod(R.range(0,10),R.range(0,10)).map((t=>t.concat(["BLC"]))).map((t=>t.concat(["background-color: #808080"])))),e(3,s=R.splitEvery(10,s)),e(3,s[5][5][2]="USR",s),e(3,s[5][5][3]="background-color: #0000FF",s),e(2,l=""),i=[{NAME:"USR",LFP:5,ATK:1}],F={UNT_NUM_0:{TYPE:"UNT",NAME:"UNT_0",LFP:3,ATK:1},UNT_NUM_1:{TYPE:"UNT",NAME:"UNT_1",LFP:2,ATK:2},UNT_NUM_2:{TYPE:"UNT",NAME:"UNT_2",LFP:2,ATK:3},UNT_NUM_3:{TYPE:"UNT",NAME:"UNT_3",LFP:2,ATK:4},UNT_NUM_4:{TYPE:"UNT",NAME:"UNT_4",LFP:4,ATK:1},UNT_NUM_5:{TYPE:"UNT",NAME:"UNT_5",LFP:4,ATK:2},UNT_NUM_6:{TYPE:"UNT",NAME:"UNT_6",LFP:5,ATK:1},UNT_NUM_7:{TYPE:"UNT",NAME:"UNT_7",LFP:5,ATK:2},UNT_NUM_8:{TYPE:"UNT",NAME:"UNT_8",LFP:5,ATK:3},UNT_NUM_9:{TYPE:"UNT",NAME:"UNT_9",LFP:5,ATK:4},UNT_NUM_10:{TYPE:"UNT",NAME:"UNT_10",LFP:6,ATK:1},UNT_NUM_11:{TYPE:"UNT",NAME:"UNT_11",LFP:6,ATK:2},UNT_NUM_12:{TYPE:"UNT",NAME:"UNT_12",LFP:6,ATK:3},UNT_NUM_13:{TYPE:"UNT",NAME:"UNT_13",LFP:6,ATK:4},UNT_NUM_14:{TYPE:"UNT",NAME:"UNT_14",LFP:1,ATK:1},UNT_NUM_15:{TYPE:"UNT",NAME:"UNT_15",LFP:1,ATK:2},UNT_NUM_16:{TYPE:"UNT",NAME:"UNT_16",LFP:1,ATK:3}},f=9,e(3,s[n=0][f][2]="GOL",s),e(3,s[n][f][3]="background-color: #FFFF00",s),e(0,r=0),e(1,c=!1),u=[],o=[5,5],((t=80)=>{const n=s.map((t=>t.filter((t=>"BLC"===t[2])))).flat().length,e=Math.floor(n*(t/100));for(let t=0;t<e;t++){const t=[shuffle([0,1,2,3,4,5,6,7,8,9])[0],shuffle([0,1,2,3,4,5,6,7,8,9])[0]];"USR"!==s[t[0]][t[1]][2]&&"GOL"!==s[t[0]][t[1]][2]&&a(t[0],t[1])}})(),e(3,s[5][4][2]="NON",s),e(3,s[5][4][3]="background-color: #FFFFFF",s),e(3,s[5][6][2]="NON",s),e(3,s[5][6][3]="background-color: #FFFFFF",s),e(3,s[4][5][2]="NON",s),e(3,s[4][5][3]="background-color: #FFFFFF",s),e(3,s[6][5][2]="NON",s),e(3,s[6][5][3]="background-color: #FFFFFF",s),e(3,s[5][3][2]="NON",s),e(3,s[5][3][3]="background-color: #FFFFFF",s),e(3,s[5][7][2]="NON",s),e(3,s[5][7][3]="background-color: #FFFFFF",s),e(3,s[3][5][2]="NON",s),e(3,s[3][5][3]="background-color: #FFFFFF",s),e(3,s[7][5][2]="NON",s),e(3,s[7][5][3]="background-color: #FFFFFF",s),T(),document.addEventListener("keypress",N)};g((async()=>{try{_({when_mounted_time:!0})}catch(t){console.log(t)}}));return[r,c,l,s,f,N,(t,n)=>f(t,n),(t,n)=>f(t,n),()=>N({key:"w"}),()=>N({key:"a"}),()=>N({key:"d"}),()=>N({key:"s"})]}function j(t){let n=1e3,e=[],o=!1,r=0,c=[{RARITY:0,LFP_BUFF:0,LFP_DEBUFF:0,ATK_BUFF:1,ATK_DEBUFF:0},{RARITY:1,LFP_BUFF:0,LFP_DEBUFF:0,ATK_BUFF:2,ATK_DEBUFF:0},{RARITY:2,LFP_BUFF:0,LFP_DEBUFF:0,ATK_BUFF:3,ATK_DEBUFF:0},{RARITY:3,LFP_BUFF:0,LFP_DEBUFF:0,ATK_BUFF:4,ATK_DEBUFF:0},{RARITY:90,LFP_BUFF:0,LFP_DEBUFF:0,ATK_BUFF:10,ATK_DEBUFF:0}].reduce(((t,n)=>{n.RARITY;const e=90===n.RARITY?1:0===n.RARITY?80:n.RARITY;for(let o=0;o<e;o++)t.push(n);return t}),[]),l=shuffle(c);shuffle(c.slice(0,100));const u=()=>{const t=o?((t,n)=>{const e=l.filter((n=>n.RARITY===t)),o=e.slice(0,e.length-e.length*(n/100)),r=l.filter((n=>n.RARITY!==t)),c=o.concat(r);return shuffle(c)})(0,90):l,c=shuffle(t)[0];console.log(c),n<1||(n-=1,e=R.append(c,e),e.slice(-shuffle([2,3])[0]).every((t=>t.RARITY>=1))&&(o=!0),!0===o&&(r+=1,o=!(r>=30),r=r>=30?0:r))};return document.addEventListener("keypress",(function(t){u(),t.key})),[]}const V=new class extends B{constructor(t){super(),x(this,t,G,W,l,{},null,[-1,-1])}}({target:document.body}),q=new class extends B{constructor(t){super(),x(this,t,j,null,l,{})}}({target:document.body});return t.app=V,t.slot=q,t}({});
//# sourceMappingURL=bundle.js.map
